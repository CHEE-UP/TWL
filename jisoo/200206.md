# 200206 목

#### Todo

- 알고리즘

- 장고

- 기술면접
- 오레오 피피티 만들기



## 알고리즘

10-2217

```
들어온 로프의 값을 정렬해준다.
예를 들어 로프의 값이 [3, 5, 10] 이라면,
10*1, 5*2, 3*3 을 계산하여 가장 큰 값을 선택하면 된다.

어떻게 풀면 되는지 바로 생각이 안난다ㅜㅜ 흐규규
```



https://blog.encrypted.gg/757?category=773649

N이하의 소수를 모두 찾는 알고리즘 - 에라토스테네스의 체

1부터 시작해서 N까지 true로 두고 1 다음인 2부터 시작하여 소수인지 체크하고 그 수의 배수를 모두 false로 바꾼다.



10-10162

```
난 for문 돌리면서 짰는데 그게 아니고 간단하게 짤 수 있다는게 놀랍다,,
고수의 길은 멀고도 험하다...
```



## 장고  [ ViewSets ]

https://www.django-rest-framework.org/api-guide/viewsets/

관련 뷰들을 단일 클래스로 결합한 것.

class-based 뷰의 `.get()` or `.post()` 대신 `.list()` and `.create()` 같은 메소드들을 제공한다.



### 장점

- queryset이나 serializer 처럼 반복되서 사용되는 것을 한번만 지정하여 여러 메소드에서 사용할 수 있다.
- 라우터를 사용하면 URL conf 를 직접 지정할 필요가 없다.



### 정의 방법

제공하는 뷰셋을 사용하는 것이 좋다.

```python
#사용자가 정의하는 뷰셋
class UserViewSet(viewsets.Viewset)

#기본으로 제공하는 뷰셋
class UserViewSet(viewsets.ModelViewset)
```



### URL

라우터 클래스를 제공하여 자동으로 url 결정해준다.

```python
from myapp.views import UserViewSet
from rest_framework.routers import DefaultRouter

router = DefaultRouter()
router.register(r'users', UserViewSet, basename='user')
urlpatterns = router.urls
```



### 빈 뷰셋에서 제공하는 기본 메소드

경로를 제공하지만 안에 동작은 구현해야 한다.

```Python
class UserViewSet(viewsets.ViewSet):
  	#리스트, 생성, 검색, 업데이트, 부분업뎃, 삭제
    
    def list(self, request):
        pass

    def create(self, request):
        pass

    def retrieve(self, request, pk=None):
        pass

    def update(self, request, pk=None):
        pass

    def partial_update(self, request, pk=None):
        pass

    def destroy(self, request, pk=None):
        pass
```



### 뷰셋 속성

viewset.~ 로 사용할 수 있는 것들

- `basename` -작성된 URL 이름에 사용하는베이스

- `action`-현재 작업의 이름 (예 : `list`, `create`)

- `detail` -현재 조치가 목록 또는 세부 사항보기에 대해 구성되어 있는지 여부를 나타내는 bool입니다.

- `suffix`-뷰셋 유형의 디스플레이 접미사- `detail`속성을 미러링 합니다.

- `name`-뷰셋의 표시 이름.

- `description` -뷰 세트의 개별 뷰에 대한 표시 설명.

  

예를 들어 다음과 같이 사용이 가능하다. 특정 뷰에만 다른 권한을 주는 경우

```python
def get_permissions(self):
  if self.action == 'list':
    permission_classes = [IsAuthenticated]
	else:
        permission_classes = [IsAdmin]
 	return [permission() for permission in permission_classes]
```



### 메소드 추가하기

함수 위에 @action 데코레이터 붙여주기

url은 함수이름으로 자동으로 생성된다. (^users/{pk}/set_password/)

```python
@action(detail=True, methods=['post', 'put'],  permission_classes=[IsAdminOrIsSelf])
def set_password(self, request, pk=None):
  ...
```

detail True 는 pk가 있는경우



추가 메소드를 별도의 뷰셋 메소드에 맵핑할 수 있다. 단일 경로로 설정 가능

```python
@action(detail=True, methods=['put'], name='Change Password')
def password(self, request, pk=None):

@password.mapping.delete
def delete_password(self, request, pk=None):
```



### 리버싱 action URL

.reverse_action() 메소드를 통해 쉽게 가져올 수 있다. request 객체를 전달한다. url_name 을 넣어줘야 한다.

```python
>>> view.reverse_action('set-password', args=['1'])
'http://localhost:8000/api/users/1/set_password'

@action 을 사용하여 url_name을 붙인 경우
>>> view.reverse_action(view.set_password.url_name, args=['1'])
'http://localhost:8000/api/users/1/set_password'
```

>https://github.com/encode/django-rest-framework/blob/master/tests/test_viewsets.py 참고 링크



### API Reference

#### ViewSet

APIView를 상속한다. `permission_classes`, `authentication_classes` 를 사용할 수 있다. 동작 구현을 제공하지 않아서, 재정의를 해야한다.



#### GenericViewSet

GenericAPIView를 상속한다. 일반 뷰 기반 동작을 제공하지만 기본 동작은 포함하지 않는다. 클래스를 재정의하고 믹스인 클래스를 믹스인 해야한다.



#### ModelViewSet

다양한 믹스 인 클래스의 동작을 혼합하여 다양한 액션에 대한 구현을 상속하고 포함한다.

queryset과 serializer_class 변수는 꼭 필요하다. 아래 메소드로 동적인 쿼리셋을 만들 수도 있다.

```python
def query_set(self):
```



#### ReadOnlyModelViewSet

읽기 전용으로 .list()와 .retrieve() 만 제공한다.



#### 사용자 정의 ViewSet

믹스인에서 제공하는 클래스들을 재정의 해야한다.

```python
from rest_framework import mixins

class CreateListViewSet(mixins.CreateModelMixin,
                                mixins.ListModelMixin,
                                viewsets.GenericViewSet):
```

