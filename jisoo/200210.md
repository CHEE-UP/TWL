# 200210 월

- 알고리즘
- 장고
- 인터뷰



## 알고리즘

https://blog.encrypted.gg/791?category=773649

읽어도 뭔말인지 모르겠다.

사실 집중이 잘 안돼서 머리에 안들어왔는지도 모르겠다.

쩝

낼 다시 해봐야지



## 장고

## Mixin

클래스의 기본 동작을 제공하는데 사용된다. 직접 정의하지 않아서 유연하게 행동 구성이 가능하다.

1. CreateModelMixin

   `.create(request, *args, **kwargs)` 새 모델 인스턴스 작성 및 저장을 구현한다.

   성공하였을 경우 201 created를 리턴한다. 유효하지 않은 경우는 400 Bad Request가 리턴된다.

2. RetrieveModelMixin

   `.retrieve(request, *args, **kwargs)` 기존 모델 인스턴스를 리턴한다.

   객체를 반환할 수 있으면 200 OK 를 응답하고, 그렇지 않으면 404 Not Found 가 리턴된다.

3. UpdateModelMixin

   `.update(request, *args, **kwargs)` 기존 모델 인스턴스의 업데이트 및 저장을 구현 하는 방법을 제공한다.  또한 부분 업데이트인 `.partial_update(request, *args, **kwargs)` 도 제공한다.

   객체가 업데이트 되면 200 OK 응답하고, 제공된 데이터가 유효하지 않은 경우 400 Bad Request 를 오류 본문과 함께 응답한다.

4. DestroyModelMixin

   `.destroy(request, *args, **kwargs)`기존 모델 인스턴스의 삭제를 구현 하는 메소드를 제공한다.

   객체 삭제가 되면 204 No Content 응답을 반환하고 그렇지 않으면 404 Not Found를 리턴한다.



## [Concrete View Classes](https://www.django-rest-framework.org/api-guide/generic-views/#concrete-view-classes)

1. CreateAPIView

   `post`메소드 핸들러를 제공합니다 .

   확장 : GenericAPIView, CreateModelMixin

2. ListAPIView

   모델 인스턴스 모아놓은 collection을 보여주기 위한 읽기 전용 뷰

   `get` 메소드 핸들러 제공

   확장 : GenericAPIView, ListModelMixin

3. RetrieveAPIView

   단일 모델 인스턴스를 보여주기 위한 뷰

   `get` 메소드 핸들러 제공

   확장 : GenericAPIView, RetriveModelMixin

4. DestroyAPIView

   단일 모델 인스턴스 삭제 전용

   `delete` 메소드 핸들러 제공

   확장 : GenericAPIView, DestroyModelMixin

5. UpdateAPIView

   단일 모델 인스턴스 업데이트 전용

   `put`,  `patch`  메소드 핸들러 제공

   확장 : GenericAPIView, UpdateModelMixin

6. ListCreateAPIView

   모델 인스턴스의 collection에 적용되는 읽기 쓰기 제공

   `get`, `post` 메소드 핸들러 제공

   확장 : GenericAPIView, ListModelMixin, CreateModelMixin

7. RetrieveUpdateAPIView

   단일 모델 인스턴스에 적용되는 읽기, 업데이트 제공

   `get`, `pust`, `patch` 메소드 핸들러 제공

   확장 : GenericAPIView, RetrieveModelMixin, UpdateModelMixin

8. RetrieveDestroyAPIView

   단일 모델 인스턴스에 적용되는 읽기, 삭제 제공

   `get`, `delete` 메소드 핸들러 제공

   확장 : GenericAPIView, RetrieveModelMixin, DestroyModelMixin

9. RetrieveUpdateDestroyAPIView

   단일 모델 인스턴스에 적용. 읽기, 쓰기, 삭제

   `get`, `put`, `patch`, `delete` 메소드 핸들러 제공

   확장 : GenericAPIView, RetrieveModelMixin, UpdateModelMixin, DestroyModelMixin



## Custom mixins

항상 같은 동작을 하는 함수를 만들어 다른 함수에 적용할 수 있다.

아래 예시는 URL conf의 여러 필드를 기반으로 객체를 조회하는 경우이다.

```python
class MultipleFieldLookupMixin(object):
	def get_object(self):
        queryset = self.get_queryset()             # Get the base queryset
        queryset = self.filter_queryset(queryset)  # Apply any filter backends
        filter = {}
        for field in self.lookup_fields:
            if self.kwargs[field]: # Ignore empty fields.
                filter[field] = self.kwargs[field]
        obj = get_object_or_404(queryset, **filter)  # Lookup the object
        self.check_object_permissions(self.request, obj)
        return obj
      
      
class RetrieveUserView(MultipleFieldLookupMixin, generics.RetrieveAPIView):
    queryset = User.objects.all()
    serializer_class = UserSerializer
    lookup_fields = ['account', 'username']
```



## Custom base classes

프로젝트 전체에서 사용할 수 있는 클래스를 만들 수 있다.

```python
class BaseRetrieveView(MultipleFieldLookupMixin, generics.RetrieveAPIView):
    pass

class BaseRetrieveUpdateDestroyView(MultipleFieldLookupMixin, generics.RetrieveUpdateDestroyAPIView):
    pass
```





## GenericAPIView

- lookup_field : 여러개의 필드를 검사하여 가져오고 싶을 때나, detail 에서 pk필드 말고 다른 필드로 찾고 싶을 때
- filter_backends : 쿼리 집합 필터링 사용하는 것